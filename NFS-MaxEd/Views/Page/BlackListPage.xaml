<Page
    Background="#1a1a1a"
    Title="BlackListPage"
    mc:Ignorable="d"
    x:Class="NFSMaxEd.Views.BlackListPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <!--  Top Panel with rounded corners  -->
        <Border
            CornerRadius="15"
            SnapsToDevicePixels="True"
            Style="{StaticResource CardStyle}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Header and Page Title  -->
                <StackPanel
                    Grid.Column="0"
                    Orientation="Vertical"
                    VerticalAlignment="Center">
                    <TextBlock
                        FontSize="24"
                        FontWeight="Bold"
                        Foreground="White"
                        Margin="0,5,0,0"
                        Text="BlackList Configuration" />
                </StackPanel>

                <!--  Buttons  -->
                <StackPanel
                    Grid.Column="1"
                    HorizontalAlignment="Right"
                    Orientation="Horizontal"
                    VerticalAlignment="Center" />
            </Grid>
        </Border>


        <!--  Required Parameters Section  -->
        <Border Grid.Row="2" Style="{StaticResource CardStyle}">
            <StackPanel>
                <TextBlock
                    FontSize="18"
                    FontWeight="Bold"
                    Margin="0,0,0,15"
                    Style="{StaticResource LabelStyle}"
                    Text="Required Parameters" />

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!--  Required Race Won  -->
                    <StackPanel Grid.Column="0">
                        <TextBlock Style="{StaticResource LabelStyle}" Text="Required Race Won" />
                        <TextBox Text="{Binding Blacklist.RequiredRaceWon, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>

                    <!--  Required Challenges  -->
                    <StackPanel Grid.Column="2">
                        <TextBlock
                            Margin="0,0,0,5"
                            Style="{StaticResource LabelStyle}"
                            Text="Required Challenges" />
                        <TextBox Text="{Binding Blacklist.RequiredChallenges, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                    <!--  Required Bounty  -->
                    <StackPanel Grid.Column="4">
                        <TextBlock
                            Margin="0,0,0,5"
                            Style="{StaticResource LabelStyle}"
                            Text="Required Bounty" />
                        <TextBox Text="{Binding Blacklist.RequiredBounty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                </Grid>

                <!--  Race Bin  -->
                <StackPanel Margin="0,20,0,0">
                    <TextBlock
                        Margin="0,0,0,5"
                        Style="{StaticResource LabelStyle}"
                        Text="Race Bin" />
                    <ComboBox
                        HorizontalAlignment="Left"
                        ItemsSource="{Binding Blacklist.RaceBins}"
                        MaxWidth="300"
                        SelectedItem="{Binding Blacklist.RaceBin, Mode=TwoWay}" />
                </StackPanel>
            </StackPanel>
        </Border>

        <!--  Lists Section  -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  Boss Races  -->
            <Border Grid.Column="0" Style="{StaticResource CardStyle}">
                <DockPanel>
                    <TextBlock
                        DockPanel.Dock="Top"
                        FontSize="16"
                        FontWeight="Bold"
                        Margin="0,0,0,15"
                        Style="{StaticResource LabelStyle}"
                        Text="Boss Races" />

                    <Button
                        Command="{Binding Blacklist.AddBossRaceCommand}"
                        Content="+ Add Boss Race"
                        DockPanel.Dock="Bottom"
                        Height="35"
                        Margin="0,10,0,0"
                        Style="{StaticResource ButtonStyle}" />

                    <ScrollViewer CanContentScroll="True" HorizontalScrollBarVisibility="Disabled">
                        <ItemsControl ItemsSource="{Binding Blacklist.BossRaces}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="35" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        <Button
                                            Command="{Binding DataContext.Blacklist.RemoveBossRaceCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                            CommandParameter="{Binding .}"
                                            Content="×"
                                            Grid.Column="1"
                                            Margin="0,0,0,15"
                                            Style="{StaticResource DeleteButtonStyle}" />
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </DockPanel>
            </Border>

            <!--  Children  -->
            <Border Grid.Column="2" Style="{StaticResource CardStyle}">
                <DockPanel>
                    <TextBlock
                        DockPanel.Dock="Top"
                        FontSize="16"
                        FontWeight="Bold"
                        Margin="0,0,0,15"
                        Style="{StaticResource LabelStyle}"
                        Text="Children" />

                    <Button
                        Command="{Binding Blacklist.AddChildCommand}"
                        Content="+ Add Child"
                        DockPanel.Dock="Bottom"
                        Height="35"
                        Margin="0,10,0,0"
                        Style="{StaticResource ButtonStyle}" />

                    <ScrollViewer CanContentScroll="True" HorizontalScrollBarVisibility="Disabled">
                        <ItemsControl ItemsSource="{Binding Blacklist.Children}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="35" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        <Button
                                            Command="{Binding DataContext.Blacklist.RemoveChildCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                            CommandParameter="{Binding .}"
                                            Content="×"
                                            Grid.Column="1"
                                            Margin="0,0,0,15"
                                            Style="{StaticResource DeleteButtonStyle}" />
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </DockPanel>
            </Border>

            <!--  World Races  -->
            <Border Grid.Column="4" Style="{StaticResource CardStyle}">
                <DockPanel>
                    <TextBlock
                        DockPanel.Dock="Top"
                        FontSize="16"
                        FontWeight="Bold"
                        Margin="0,0,0,15"
                        Style="{StaticResource LabelStyle}"
                        Text="World Races" />
                    <Button
                        Command="{Binding Blacklist.AddWorldRaceCommand}"
                        Content="+ Add World Race"
                        DockPanel.Dock="Bottom"
                        Height="35"
                        Margin="0,10,0,0"
                        Style="{StaticResource ButtonStyle}" />
                    <ScrollViewer CanContentScroll="True" HorizontalScrollBarVisibility="Disabled">
                        <ItemsControl ItemsSource="{Binding Blacklist.WorldRaces}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="35" />
                                        </Grid.ColumnDefinitions>
                                        <TextBox Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        <Button
                                            Command="{Binding DataContext.Blacklist.RemoveWorldRaceCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                            CommandParameter="{Binding .}"
                                            Content="×"
                                            Grid.Column="1"
                                            Margin="0,0,0,15"
                                            Style="{StaticResource DeleteButtonStyle}" />
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </DockPanel>
            </Border>
            <!--  Milestones  -->
            <Border Grid.Column="6" Style="{StaticResource CardStyle}">
                <DockPanel>
                    <TextBlock
                        DockPanel.Dock="Top"
                        FontSize="16"
                        FontWeight="Bold"
                        Margin="0,0,0,15"
                        Style="{StaticResource LabelStyle}"
                        Text="Milestones" />
                    <Button
                        Command="{Binding Blacklist.AddMilestoneCommand}"
                        Content="+ Add Milestones"
                        DockPanel.Dock="Bottom"
                        Height="35"
                        Margin="0,10,0,0"
                        Style="{StaticResource ButtonStyle}" />
                    <ScrollViewer CanContentScroll="True" HorizontalScrollBarVisibility="Disabled">
                        <ItemsControl ItemsSource="{Binding Blacklist.Milestones}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="35" />
                                        </Grid.ColumnDefinitions>
                                        <TextBox Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        <Button
                                            Command="{Binding DataContext.Blacklist.RemoveMilestoneCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                            CommandParameter="{Binding .}"
                                            Content="×"
                                            Grid.Column="1"
                                            Margin="0,0,0,15"
                                            Style="{StaticResource DeleteButtonStyle}" />
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </DockPanel>
            </Border>
        </Grid>
    </Grid>
</Page>